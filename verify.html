<h2>Certificate Verification</h2>
<input id="reg" placeholder="Enter Register Number">
<button onclick="verify()">Verify</button>
<div id="result"></div>

<script type="module">
import { db } from './js/firebase-config.js';
import { doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

window.verify = async function() {
    const regNum = document.getElementById('reg').value.trim();
    if(!regNum) return alert("Enter Register Number");

    const ref = doc(db, "students", regNum);
    const snap = await getDoc(ref);

    const result = document.getElementById('result');
    if(snap.exists()){
        const student = snap.data();
        result.innerHTML = `
            <h3>Verified ✅</h3>
            <img src="${student.imageUrl || 'https://via.placeholder.com/120'}" alt="${student.name}" style="width:120px; height:120px; object-fit:cover; border-radius:50%;">
            <p><b>Name:</b> ${student.name}</p>
            <p><b>Register No:</b> ${regNum}</p>
            <p><b>Course:</b> ${student.course}</p>
            <p><b>Email:</b> ${student.email}</p>
        `;
    } else {
        result.innerHTML = "<h3>❌ Not Found</h3>";
    }
}
</script>